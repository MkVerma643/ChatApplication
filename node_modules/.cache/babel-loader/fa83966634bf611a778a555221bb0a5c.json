{"ast":null,"code":"import _slicedToArray from\"C:/React/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import socket from\"./socket\";import{login}from\"../reduxstore/thunk\";import immer from\"immer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];// const [yourID, setYourID] = useState()\n// console.log(\"login props\",props)\nfunction joinCallback(messages,room){console.log(\"aaaa\",messages,room);var newMessages=immer(messages,function(draft){draft[room]=room;});props.dispatch({type:\"MESSAGE\",payload:newMessages});}var submitHandle=function submitHandle(e){e.preventDefault();socket.emit(\"join\",user);socket.emit(\"join room\",\"general\");props.dispatch(login(user));// socket.emit(\"Join\",userData)\nprops.history.push(\"/chat\");};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandle,style:{width:500},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"Hop In\"}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"Username\",style:{fontSize:20,marginRight:10},children:[\"Username:\",\" \"]}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setUser(e.target.value);},type:\"text\",className:\"form-control\",placeholder:\"Username\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"bth btn-dark form-control\",children:\"Join\"})]})})]})});}export default connect(function(state,props){return{logged:state===null||state===void 0?void 0:state.isloggedin,messages:state===null||state===void 0?void 0:state.messages};})(Login);","map":{"version":3,"sources":["C:/React/WebChat/src/components/Login.jsx"],"names":["React","useEffect","useState","connect","socket","login","immer","Login","props","user","setUser","joinCallback","messages","room","console","log","newMessages","draft","dispatch","type","payload","submitHandle","e","preventDefault","emit","history","push","width","fontSize","marginRight","target","value","state","logged","isloggedin"],"mappings":"+HAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OAASC,KAAT,KAAsB,qBAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFACA,QAASC,CAAAA,KAAT,CAAeC,KAAf,CAAsB,CACpB,cAAwBN,QAAQ,EAAhC,wCAAOO,IAAP,eAAaC,OAAb,eACA;AACA;AACA,QAASC,CAAAA,YAAT,CAAsBC,QAAtB,CAAgCC,IAAhC,CAAsC,CACpCC,OAAO,CAACC,GAAR,CAAY,MAAZ,CAAoBH,QAApB,CAA8BC,IAA9B,EACA,GAAMG,CAAAA,WAAW,CAAGV,KAAK,CAACM,QAAD,CAAW,SAACK,KAAD,CAAW,CAC7CA,KAAK,CAACJ,IAAD,CAAL,CAAcA,IAAd,CACD,CAFwB,CAAzB,CAGAL,KAAK,CAACU,QAAN,CAAe,CACbC,IAAI,CAAE,SADO,CAEbC,OAAO,CAAEJ,WAFI,CAAf,EAID,CAED,GAAIK,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CACxBA,CAAC,CAACC,cAAF,GACAnB,MAAM,CAACoB,IAAP,CAAY,MAAZ,CAAoBf,IAApB,EACAL,MAAM,CAACoB,IAAP,CAAY,WAAZ,CAAyB,SAAzB,EACAhB,KAAK,CAACU,QAAN,CAAeb,KAAK,CAACI,IAAD,CAApB,EACA;AAEAD,KAAK,CAACiB,OAAN,CAAcC,IAAd,CAAmB,OAAnB,EACD,CARD,CAUA,mBACE,YAAK,SAAS,CAAC,WAAf,uBACE,aAAK,SAAS,CAAC,KAAf,wBACE,YAAK,SAAS,CAAC,UAAf,EADF,cAEE,YAAK,SAAS,CAAC,UAAf,uBACE,cAAM,QAAQ,CAAEL,YAAhB,CAA8B,KAAK,CAAE,CAAEM,KAAK,CAAE,GAAT,CAArC,wBACE,WAAI,SAAS,CAAC,aAAd,oBADF,cAEE,eAAO,OAAO,CAAC,UAAf,CAA0B,KAAK,CAAE,CAAEC,QAAQ,CAAE,EAAZ,CAAgBC,WAAW,CAAE,EAA7B,CAAjC,uBACY,GADZ,GAFF,cAKE,cACE,QAAQ,CAAE,kBAACP,CAAD,QAAOZ,CAAAA,OAAO,CAACY,CAAC,CAACQ,MAAF,CAASC,KAAV,CAAd,EADZ,CAEE,IAAI,CAAC,MAFP,CAGE,SAAS,CAAC,cAHZ,CAIE,WAAW,CAAC,UAJd,EALF,cAWE,aAXF,cAYE,eAAQ,SAAS,CAAC,2BAAlB,kBAZF,GADF,EAFF,GADF,EADF,CAuBD,CAED,cAAe5B,CAAAA,OAAO,CAAC,SAAU6B,KAAV,CAAiBxB,KAAjB,CAAwB,CAC7C,MAAO,CACLyB,MAAM,CAAED,KAAF,SAAEA,KAAF,iBAAEA,KAAK,CAAEE,UADV,CAELtB,QAAQ,CAAEoB,KAAF,SAAEA,KAAF,iBAAEA,KAAK,CAAEpB,QAFZ,CAAP,CAID,CALqB,CAAP,CAKZL,KALY,CAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport socket from \"./socket\";\r\nimport { login } from \"../reduxstore/thunk\";\r\nimport immer from \"immer\";\r\nfunction Login(props) {\r\n  const [user, setUser] = useState();\r\n  // const [yourID, setYourID] = useState()\r\n  // console.log(\"login props\",props)\r\n  function joinCallback(messages, room) {\r\n    console.log(\"aaaa\", messages, room);\r\n    const newMessages = immer(messages, (draft) => {\r\n      draft[room] = room;\r\n    });\r\n    props.dispatch({\r\n      type: \"MESSAGE\",\r\n      payload: newMessages,\r\n    });\r\n  }\r\n\r\n  let submitHandle = (e) => {\r\n    e.preventDefault();\r\n    socket.emit(\"join\", user);\r\n    socket.emit(\"join room\", \"general\");\r\n    props.dispatch(login(user));\r\n    // socket.emit(\"Join\",userData)\r\n\r\n    props.history.push(\"/chat\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-3\"></div>\r\n        <div className=\"col-md-6\">\r\n          <form onSubmit={submitHandle} style={{ width: 500 }}>\r\n            <h2 className=\"text-center\">Hop In</h2>\r\n            <label htmlFor=\"Username\" style={{ fontSize: 20, marginRight: 10 }}>\r\n              Username:{\" \"}\r\n            </label>\r\n            <input\r\n              onChange={(e) => setUser(e.target.value)}\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"Username\"\r\n            />\r\n            <br />\r\n            <button className=\"bth btn-dark form-control\">Join</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(function (state, props) {\r\n  return {\r\n    logged: state?.isloggedin,\r\n    messages: state?.messages,\r\n  };\r\n})(Login);\r\n"]},"metadata":{},"sourceType":"module"}