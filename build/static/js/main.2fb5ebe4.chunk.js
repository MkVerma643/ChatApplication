(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{119:function(e,s,t){"use strict";t.r(s);var c=t(0),n=t.n(c),a=t(23),i=t.n(a),l=(t(74),t(18)),r=t(17),d=t.n(r),o=t(28),j=t.n(o),h=t(62),m=t(63),u=t(68),b=t(66),v=t(7),O=t(21),g=t(1),x=function(e){Object(u.a)(t,e);var s=Object(b.a)(t);function t(e){var c;return Object(h.a)(this,t),(c=s.call(this,e)).SetGeneralChat=function(){c.props.dispatch({type:"CURRENT CHAT",payload:{isChannel:!0,chatName:"general",receiverId:""}})},c.SetUserChat=function(e){if(c.props.dispatch({type:"CURRENT CHAT",payload:{isChannel:!1,chatName:e.name,receiverId:e.id}}),!c.props.messages[e.name]){var s=Object(O.a)(c.props.messages,(function(s){s[e.name]=[]}));c.props.dispatch({type:"MESSAGES",payload:s})}},c}return Object(m.a)(t,[{key:"render",value:function(){var e,s,t=this;return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"inbox_people",children:[Object(g.jsx)("div",{className:"headind_srch",children:Object(g.jsx)("div",{className:"recent_heading",children:Object(g.jsx)("h4",{children:"Group"})})}),Object(g.jsxs)("div",{className:"inbox_chat",children:[Object(g.jsx)("div",{className:"chat_list",onClick:this.SetGeneralChat,children:Object(g.jsxs)("div",{className:"chat_people",children:[Object(g.jsxs)("div",{className:"chat_img",children:[" ",Object(g.jsx)(d.a,{})," "]}),Object(g.jsxs)("div",{className:"chat_ib",children:[Object(g.jsxs)("h5",{children:["General ",Object(g.jsx)("span",{className:"chat_date",children:"0"})]}),Object(g.jsx)("p",{children:"Messages on this receives by everyone"})]})]})}),Object(g.jsx)("div",{className:"headind_srch",children:Object(g.jsx)("div",{className:"recent_heading",children:Object(g.jsx)("h4",{children:"Online"})})}),null===(e=this.props)||void 0===e||null===(s=e.allusers)||void 0===s?void 0:s.map((function(e){if(t.props.user!=e.name)return Object(g.jsx)("div",{className:"chat_list",onClick:function(){return t.SetUserChat(e)},children:Object(g.jsxs)("div",{className:"chat_people",children:[Object(g.jsxs)("div",{className:"chat_img",children:[" ",Object(g.jsx)(d.a,{})," "]}),Object(g.jsxs)("div",{className:"chat_ib",children:[Object(g.jsxs)("h5",{children:[e.name," ",Object(g.jsx)("span",{className:"chat_date",children:"0"})]}),Object(g.jsxs)("p",{children:["ID: ",e.id]})]})]})},e.id)}))]})]})})}}]),t}(c.Component),p=Object(v.b)((function(e,s){return{user:null===e||void 0===e?void 0:e.user,allusers:null===e||void 0===e?void 0:e.allusers,messages:null===e||void 0===e?void 0:e.messages,currentChat:null===e||void 0===e?void 0:e.CurrentChat}}))(x),N=t(27),f=t.n(N),_=f()("http://localhost:8080"),C=t(64);var y=Object(v.b)((function(e,s){return{user:null===e||void 0===e?void 0:e.user,messages:null===e||void 0===e?void 0:e.messages,allusers:null===e||void 0===e?void 0:e.allusers,isloggedin:null===e||void 0===e?void 0:e.isloggedin,currentChat:null===e||void 0===e?void 0:e.CurrentChat}}))((function(e){var s;console.log("yrssss",null===e||void 0===e?void 0:e.messages),_.on("newuser",(function(s){console.log("asdasdasdsadasdasd",e),e.dispatch({type:"USERS",payload:s})}));var t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],i=n[1];return _.on("new-client",(function(s){console.log("new online user found.....",s),e.dispatch({type:"USERS",payload:s})})),_.on("new message",(function(s){var t=s.content,c=s.sender,n=s.chatName,a=Object(O.a)(e.messages,(function(e){e[n]?e[n].push({content:t,sender:c}):e[n]=[{content:t,sender:c}]}));e.dispatch({type:"MESSAGES",payload:a})})),Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"container",children:[Object(g.jsxs)("h3",{className:" text-center",children:["Welcome ",e.user]}),Object(g.jsx)("div",{className:"messaging",children:Object(g.jsxs)("div",{className:"inbox_msg",children:[Object(g.jsx)(p,{}),Object(g.jsxs)("div",{className:"mesgs",children:[Object(g.jsxs)("h4",{children:[" ",Object(g.jsx)(d.a,{fontSize:"large"}),null===e||void 0===e||null===(s=e.currentChat)||void 0===s?void 0:s.chatName]}),Object(g.jsx)("div",{className:"msg_history",children:Object(g.jsx)(C.a,{children:(null===e||void 0===e?void 0:e.messages[null===e||void 0===e?void 0:e.currentChat.chatName])?null===e||void 0===e?void 0:e.messages[e.currentChat.chatName].map((function(s,t){return s.sender===(null===e||void 0===e?void 0:e.user)?Object(g.jsx)("div",{className:"outgoing_msg",children:Object(g.jsxs)("div",{className:"sent_msg",children:[Object(g.jsx)("p",{children:s.content}),Object(g.jsxs)("span",{className:"time_date",children:[" ",s.sender]})," "]})}):Object(g.jsxs)("div",{className:"incoming_msg",children:[Object(g.jsx)("div",{className:"incoming_msg_img",children:Object(g.jsx)(d.a,{})}),Object(g.jsx)("div",{className:"received_msg",children:Object(g.jsxs)("div",{className:"received_withd_msg",children:[Object(g.jsx)("p",{children:s.content}),Object(g.jsxs)("span",{className:"time_date",children:[" ",s.sender]})]})})]})})):" "})}),Object(g.jsx)("div",{className:"type_msg",children:Object(g.jsx)("div",{className:"input_msg_write",children:Object(g.jsxs)("form",{onSubmit:function(s){s.preventDefault();var t={content:a,to:e.currentChat.isChannel?e.currentChat.chatName:e.currentChat.receiverId,sender:e.user,chatName:e.currentChat.chatName,isChannel:e.currentChat.isChannel};_.emit("send message",t);var c=Object(O.a)(e.messages,(function(s){s[e.currentChat.chatName].push({sender:e.user,content:a})}));e.dispatch({type:"MESSAGES",payload:c}),i("")},children:[Object(g.jsx)("input",{type:"text",className:"write_msg",name:"msg",value:a,onChange:function(e){return i(e.target.value)},placeholder:"Type a message"}),Object(g.jsx)("button",{className:"msg_send_btn",children:Object(g.jsx)(j.a,{style:{color:"#fff"}})})]})})})]})]})})]})})})),S=t(67),E=t(3),w=f()("http://localhost:7000");Object(v.b)((function(e,s){return{user:null===e||void 0===e?void 0:e.user,isloggedin:null===e||void 0===e?void 0:e.isloggedin}}))((function(e){1!=e.isloggedin&&e.history.push("/"),console.log("chatssss",e);var s=Object(E.e)(),t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)([]),o=Object(l.a)(r,2),h=o[0],m=o[1],u=Object(c.useState)([]),b=Object(l.a)(u,2),v=b[0],O=b[1];return console.log("chatttttsssss",h),Object(c.useEffect)((function(){w.on("new-client",(function(e){console.log("new online user found.....",e),O(e)})),w.on("message",(function(e){m([].concat(Object(S.a)(h),[e]))}))})),Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"container",children:[Object(g.jsxs)("h3",{className:" text-center",children:["Welcome ",null===e||void 0===e?void 0:e.user]}),Object(g.jsx)("div",{className:"messaging",children:Object(g.jsxs)("div",{className:"inbox_msg",children:[Object(g.jsx)(p,{people:v}),Object(g.jsxs)("div",{className:"mesgs",children:[Object(g.jsxs)("h4",{children:[" ","Public"]}),Object(g.jsx)("div",{className:"msg_history",children:h.map((function(s){return s.id===e.user.id?Object(g.jsx)("div",{className:"outgoing_msg",children:Object(g.jsxs)("div",{className:"sent_msg",children:[Object(g.jsx)("p",{children:s.msg}),Object(g.jsxs)("span",{className:"time_date",children:[" ",s.time]})," "]})},s.id):Object(g.jsxs)("div",{className:"incoming_msg",children:[Object(g.jsx)("div",{className:"incoming_msg_img",children:Object(g.jsx)(d.a,{})}),Object(g.jsx)("div",{className:"received_msg",children:Object(g.jsxs)("div",{className:"received_withd_msg",children:[Object(g.jsxs)("p",{children:[" ",s.msg]}),Object(g.jsx)("span",{className:"time_date",children:s.time})]})})]},s.id)}))}),Object(g.jsx)("div",{className:"type_msg",children:Object(g.jsx)("div",{className:"input_msg_write",children:Object(g.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),e.custom){console.log("parmas",s.id),console.log(a);var c={msg:a,id:e.user.id,time:new Date,to:s.id};w.emit("custom-message",c)}else{console.log(a);var n={msg:a,id:e.user.id,time:new Date};w.emit("message",n)}i("")},children:[Object(g.jsx)("input",{type:"text",name:"message",placeholder:"Type message",value:a,onChange:function(e){i(e.target.value)},required:!0}),Object(g.jsx)("button",{className:"msg_send_btn",children:Object(g.jsx)(j.a,{style:{color:"#fff"}})})]})})})]})]})})]})})}));var R=Object(v.b)((function(e,s){return{logged:null===e||void 0===e?void 0:e.isloggedin,messages:null===e||void 0===e?void 0:e.messages}}))((function(e){var s=Object(c.useState)(),t=Object(l.a)(s,2),n=t[0],a=t[1];return Object(g.jsx)("div",{className:"container",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-md-3"}),Object(g.jsx)("div",{className:"col-md-6",children:Object(g.jsxs)("form",{onSubmit:function(s){s.preventDefault(),_.emit("join",n),_.emit("join room","general"),e.dispatch(function(e){return function(s,t){s({type:"ENTER",payload:e})}}(n)),e.history.push("/chat")},style:{width:500},children:[Object(g.jsx)("h2",{className:"text-center",children:"Hop In"}),Object(g.jsxs)("label",{htmlFor:"Username",style:{fontSize:20,marginRight:10},children:["Username:"," "]}),Object(g.jsx)("input",{onChange:function(e){return a(e.target.value)},type:"text",className:"form-control",placeholder:"Username"}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{className:"bth btn-dark form-control",children:"Join"})]})})]})})})),U=t(39);var T=Object(v.b)((function(e,s){return console.log("state",e),{isloggedin:null===e||void 0===e?void 0:e.isloggedin}}))((function(e){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("nav",{className:"navbar navbar-dark bg-dark p-2 ",children:Object(g.jsx)("a",{className:"navbar-brand",href:"#",children:"WebChat"})}),Object(g.jsxs)(U.a,{children:[Object(g.jsx)(E.a,{exact:!0,path:"/chat",component:e.isloggedin?y:R}),Object(g.jsx)(E.a,{exact:!0,path:"/ChatApplication",component:R})]})]})})),k=(t(110),t(111),t(42)),A=t(30),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:{general:[]}},s=arguments.length>1?arguments[1]:void 0;switch(s.type){case"ENTER":return console.log("hit meeeee",s),(e=Object(A.a)({},e)).isloggedin=!0,e.user=s.payload,e.CurrentChat={isChannel:!0,chatName:"general",receiverId:""},e;case"CURRENT CHAT":return(e=Object(A.a)({},e)).CurrentChat=s.payload,e;case"MESSAGES":return console.log("hahahhhaa",s),(e=Object(A.a)({},e)).messages=s.payload,e;case"USERS":return(e=Object(A.a)({},e)).allusers=s.payload,e}};var I=t(65),D=Object(k.a)((function(e){return function(e){return function(s){return e(s)}}}),I.a),M=Object(k.b)(G,D);i.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(v.a,{store:M,children:Object(g.jsx)(T,{})})}),document.getElementById("root"))},74:function(e,s,t){}},[[119,1,2]]]);
//# sourceMappingURL=main.2fb5ebe4.chunk.js.map