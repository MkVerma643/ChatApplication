{"version":3,"sources":["components/Users.jsx","components/socket.js","components/Chat.jsx","components/Home.jsx","components/Login.jsx","reduxstore/thunk.js","App.js","reduxstore/reducer.js","reduxstore/middleware.js","reduxstore/store.js","index.js"],"names":["Users","props","SetGeneralChat","dispatch","type","payload","isChannel","chatName","receiverId","SetUserChat","user","name","id","messages","newMessages","immer","draft","class","onClick","this","allusers","map","Component","connect","state","currentChat","CurrentChat","socket","io","isloggedin","console","log","on","useState","message","setMessage","content","sender","push","fontSize","each","index","onSubmit","e","preventDefault","to","emit","value","onChange","target","placeholder","style","color","history","params","useParams","chat","setChat","people","setPeople","useEffect","msg","time","custom","msgData","Date","required","logged","setUser","className","getState","login","width","for","marginRight","href","exact","path","component","Chat","Login","reducerFun","general","action","middleware","applyMiddleware","store","next","thunk","createStore","reducer","ReactDOM","render","StrictMode","stateStore","document","getElementById"],"mappings":"kPAOaA,EAAb,kDAEE,WAAYC,GAAO,IAAD,8BAChB,cAAMA,IAGPC,eAAiB,WAEhB,EAAKD,MAAME,SAAS,CAClBC,KAAM,eACNC,QAAS,CACPC,WAAW,EACXC,SAAU,UACVC,WAAY,OAXA,EAgBjBC,YAAc,SAAAC,GAUb,GATA,EAAKT,MAAME,SAAS,CAClBC,KAAM,eACNC,QAAS,CACPC,WAAW,EACXC,SAAUG,EAAKC,KACfH,WAAYE,EAAKE,OAIjB,EAAKX,MAAMY,SAASH,EAAKC,MAAM,CAEjC,IAAIG,EAAcC,YAAM,EAAKd,MAAMY,UAAU,SAAAG,GAC3CA,EAAMN,EAAKC,MAAQ,MAErB,EAAKV,MAAME,SAAS,CAClBC,KAAM,WACNC,QAASS,MAjCG,EAFpB,0CA0CE,WAAU,IAAD,WACP,OACE,mCACA,sBAAKG,MAAM,eAAX,UACE,qBAAKA,MAAM,eAAX,SACE,qBAAKA,MAAM,iBAAX,SACE,2CAGJ,sBAAKA,MAAM,aAAX,UACA,qBAAKA,MAAM,YAAYC,QAASC,KAAKjB,eAArC,SACc,sBAAKe,MAAM,cAAX,UACE,sBAAKA,MAAM,WAAX,UACG,IACD,cAAC,IAAD,IAAsB,OAExB,sBAAKA,MAAM,UAAX,UACE,0CACU,sBAAMA,MAAM,YAAZ,kBAEV,8EAIN,qBAAKA,MAAM,eAAX,SACV,qBAAKA,MAAM,iBAAX,SACE,4CAjBJ,UAoBGE,KAAKlB,aApBR,iBAoBG,EAAYmB,gBApBf,aAoBG,EAAsBC,KAAI,SAACX,GACtB,GAAI,EAAKT,MAAMS,MAAQA,EAAKC,KAC1B,OACE,qBAAKM,MAAM,YAA0BC,QAAS,kBAAM,EAAKT,YAAYC,IAArE,SACE,sBAAKO,MAAM,cAAX,UACE,sBAAKA,MAAM,WAAX,UACG,IACD,cAAC,IAAD,IAAsB,OAExB,sBAAKA,MAAM,UAAX,UACE,+BACGP,EAAKC,KADR,IACc,sBAAMM,MAAM,YAAZ,kBAEd,qCAAQP,EAAKE,aAVSF,EAAKE,mBA1ErD,GAA2BU,aAmGZC,eAAQ,SAAUC,EAAOvB,GACtC,MAAO,CACLS,KAAI,OAAEc,QAAF,IAAEA,OAAF,EAAEA,EAAOd,KACbU,SAAQ,OAACI,QAAD,IAACA,OAAD,EAACA,EAAOJ,SAChBP,SAAQ,OAACW,QAAD,IAACA,OAAD,EAACA,EAAOX,SAChBY,YAAW,OAAED,QAAF,IAAEA,OAAF,EAAEA,EAAOE,eALTH,CAOZvB,G,iBC/GY2B,EADAC,IAAG,yB,QCkJHL,mBAAQ,SAACC,EAAOvB,GAC7B,MAAO,CACLS,KAAI,OAAEc,QAAF,IAAEA,OAAF,EAAEA,EAAOd,KACbG,SAAQ,OAAEW,QAAF,IAAEA,OAAF,EAAEA,EAAOX,SACjBO,SAAQ,OAAEI,QAAF,IAAEA,OAAF,EAAEA,EAAOJ,SACjBS,WAAU,OAAEL,QAAF,IAAEA,OAAF,EAAEA,EAAOK,WACnBJ,YAAW,OAAED,QAAF,IAAEA,OAAF,EAAEA,EAAOE,eANTH,EAxIf,SAActB,GAAQ,IAAD,EACnB6B,QAAQC,IAAI,SAAZ,OAAsB9B,QAAtB,IAAsBA,OAAtB,EAAsBA,EAAOY,UAC7Bc,EAAOK,GAAG,WAAW,SAACZ,GACpBU,QAAQC,IAAI,qBAAqB9B,GACjCA,EAAME,SAAS,CACbC,KAAM,QACNC,QAASe,OAIb,MAA8Ba,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KAgDA,OA9CAR,EAAOK,GAAG,cAAc,SAACZ,GACvBU,QAAQC,IAAI,6BAA8BX,GAC1CnB,EAAME,SAAS,CACbC,KAAM,QACNC,QAASe,OAGbO,EAAOK,GAAG,eAAe,YAAoC,IAAjCI,EAAgC,EAAhCA,QAASC,EAAuB,EAAvBA,OAAQ9B,EAAe,EAAfA,SACrCO,EAAcC,YAAMd,EAAMY,UAAU,SAACG,GACrCA,EAAMT,GACRS,EAAMT,GAAU+B,KAAK,CAAEF,UAASC,WAEhCrB,EAAMT,GAAY,CAAC,CAAE6B,UAASC,cAIlCpC,EAAME,SAAS,CACbC,KAAM,WACNC,QAASS,OA6BX,mCACE,sBAAKG,MAAM,YAAX,UACE,qBAAIA,MAAM,eAAV,qBAAkChB,EAAMS,QACxC,qBAAKO,MAAM,YAAX,SACE,sBAAKA,MAAM,YAAX,UACE,cAAC,EAAD,IACA,sBAAKA,MAAM,QAAX,UACE,+BACG,IACD,cAAC,IAAD,CAAmBsB,SAAU,UAF/B,OAGGtC,QAHH,IAGGA,GAHH,UAGGA,EAAOwB,mBAHV,aAGG,EAAoBlB,YAEvB,qBAAKU,MAAM,cAAX,SACE,cAAC,IAAD,WACQ,OAALhB,QAAK,IAALA,OAAA,EAAAA,EAAOY,SAAP,OAAgBZ,QAAhB,IAAgBA,OAAhB,EAAgBA,EAAOwB,YAAYlB,WAAnC,OACGN,QADH,IACGA,OADH,EACGA,EAAOY,SAASZ,EAAMwB,YAAYlB,UAAUc,KAC1C,SAACmB,EAAMC,GACL,OAAID,EAAKH,UAAL,OAAgBpC,QAAhB,IAAgBA,OAAhB,EAAgBA,EAAOS,MAEvB,qBAAKO,MAAM,eAAX,SACE,sBAAKA,MAAM,WAAX,UACE,4BAAIuB,EAAKJ,UACT,uBAAMnB,MAAM,YAAZ,UACG,IACAuB,EAAKH,UACA,SAMZ,sBAAKpB,MAAM,eAAX,UACE,qBAAKA,MAAM,mBAAX,SACE,cAAC,IAAD,MAEF,qBAAKA,MAAM,eAAX,SACE,sBAAKA,MAAM,qBAAX,UACE,4BAAIuB,EAAKJ,UACT,uBAAMnB,MAAM,YAAZ,UACG,IACAuB,EAAKH,qBAStB,QAGR,qBAAKpB,MAAM,WAAX,SACE,qBAAKA,MAAM,kBAAX,SACE,uBAAMyB,SA/EF,SAACC,GACnBA,EAAEC,iBACF,IAAMvC,EAAU,CACd+B,QAASF,EACTW,GAAI5C,EAAMwB,YAAYnB,UAClBL,EAAMwB,YAAYlB,SAClBN,EAAMwB,YAAYjB,WACtB6B,OAAQpC,EAAMS,KACdH,SAAUN,EAAMwB,YAAYlB,SAC5BD,UAAWL,EAAMwB,YAAYnB,WAE/BqB,EAAOmB,KAAK,eAAgBzC,GAC5B,IAAMS,EAAcC,YAAMd,EAAMY,UAAU,SAACG,GACzCA,EAAMf,EAAMwB,YAAYlB,UAAU+B,KAAK,CACrCD,OAAQpC,EAAMS,KACd0B,QAASF,OAGbjC,EAAME,SAAS,CACbC,KAAM,WACNC,QAASS,IAEXqB,EAAW,KAyDG,UACE,uBACE/B,KAAK,OACLa,MAAM,YACNN,KAAK,MACLoC,MAAOb,EACPc,SAAU,SAACL,GAAD,OAAOR,EAAWQ,EAAEM,OAAOF,QACrCG,YAAY,mBAEd,wBAAQjC,MAAM,eAAd,SACE,cAAC,IAAD,CAAUkC,MAAO,CAAEC,MAAO,mC,eC/H1CzB,EAASC,IAAG,yBAkHHL,aAAQ,SAACC,EAAOvB,GAC7B,MAAO,CACLS,KAAI,OAAEc,QAAF,IAAEA,OAAF,EAAEA,EAAOd,KACbmB,WAAU,OAAEL,QAAF,IAAEA,OAAF,EAAEA,EAAOK,cAHRN,EAjHf,SAActB,GACY,GAApBA,EAAM4B,YACR5B,EAAMoD,QAAQf,KAAK,KAErBR,QAAQC,IAAI,WAAY9B,GACxB,IAAMqD,EAASC,cACf,EAA8BtB,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAwBF,mBAAS,IAAjC,mBAAOuB,EAAP,KAAaC,EAAb,KACA,EAA4BxB,mBAAS,IAArC,mBAAOyB,EAAP,KAAeC,EAAf,KAwCA,OAvCA7B,QAAQC,IAAI,gBAAiByB,GAC7BI,qBAAU,WAERjC,EAAOK,GAAG,cAAc,SAACtB,GACvBoB,QAAQC,IAAI,6BAA8BrB,GAC1CiD,EAAUjD,MAGZiB,EAAOK,GAAG,WAAW,SAAC3B,GACpBoD,EAAQ,GAAD,mBAAKD,GAAL,CAAWnD,WA+BpB,mCACE,sBAAKY,MAAM,YAAX,UACE,qBAAIA,MAAM,eAAV,4BAAkChB,QAAlC,IAAkCA,OAAlC,EAAkCA,EAAOS,QACzC,qBAAKO,MAAM,YAAX,SACE,sBAAKA,MAAM,YAAX,UACE,cAAC,EAAD,CAAOyC,OAAQA,IACf,sBAAKzC,MAAM,QAAX,UACA,mCAAM,YACJ,qBAAKA,MAAM,cAAX,SAEGuC,EAAKnC,KAAI,SAACwC,GACT,OAAIA,EAAIjD,KAAOX,EAAMS,KAAKE,GAEtB,qBAAKK,MAAM,eAAX,SACE,sBAAKA,MAAM,WAAX,UACE,4BAAI4C,EAAIA,MACR,uBAAM5C,MAAM,YAAZ,cAA0B4C,EAAIC,QAAa,QAHhBD,EAAIjD,IASnC,sBAAKK,MAAM,eAAX,UACE,qBAAKA,MAAM,mBAAX,SACE,cAAC,IAAD,MAEF,qBAAKA,MAAM,eAAX,SACE,sBAAKA,MAAM,qBAAX,UACE,kCAAK4C,EAAIA,OACT,sBAAM5C,MAAM,YAAZ,SAAyB4C,EAAIC,cAPJD,EAAIjD,SAe3C,qBAAKK,MAAM,WAAX,SACE,qBAAKA,MAAM,kBAAX,SACE,uBAAMyB,SAlEF,SAACC,GAEnB,GADAA,EAAEC,iBACE3C,EAAM8D,OAAQ,CAChBjC,QAAQC,IAAI,SAASuB,EAAO1C,IAC5BkB,QAAQC,IAAIG,GACZ,IAAM8B,EAAU,CAChBH,IAAK3B,EACLtB,GAAIX,EAAMS,KAAKE,GACfkD,KAAM,IAAIG,KACVpB,GAAIS,EAAO1C,IAEbe,EAAOmB,KAAK,iBAAkBkB,OAEvB,CACLlC,QAAQC,IAAIG,GACZ,IAAM8B,EAAU,CACdH,IAAK3B,EACLtB,GAAIX,EAAMS,KAAKE,GACfkD,KAAM,IAAIG,MAEZtC,EAAOmB,KAAK,UAAWkB,GAGzB7B,EAAW,KA2CG,UACE,uBACE/B,KAAK,OACLO,KAAK,UACLuC,YAAY,eACZH,MAAOb,EACPc,SAAU,SAACL,GACTR,EAAWQ,EAAEM,OAAOF,QAEtBmB,UAAQ,IAEV,wBAAQjD,MAAM,eAAd,SACE,cAAC,IAAD,CAAUkC,MAAO,CAAEC,MAAO,mCCrDjC7B,mBAAQ,SAAUC,EAAOvB,GACtC,MAAO,CACLkE,OAAM,OAAE3C,QAAF,IAAEA,OAAF,EAAEA,EAAOK,WACfhB,SAAQ,OAAEW,QAAF,IAAEA,OAAF,EAAEA,EAAOX,YAHNU,EAlDf,SAAetB,GACb,MAAwBgC,qBAAxB,mBAAOvB,EAAP,KAAa0D,EAAb,KAwBA,OACE,qBAAKC,UAAU,YAAf,SACE,sBAAKA,UAAU,MAAf,UACE,qBAAKA,UAAU,aACf,qBAAKA,UAAU,WAAf,SACE,uBAAM3B,SAfK,SAACC,GAClBA,EAAEC,iBACFjB,EAAOmB,KAAK,OAAQpC,GACpBiB,EAAOmB,KAAK,YAAa,WACzB7C,EAAME,SCxBH,SAAgBO,GACnB,OAAO,SAASP,EAAUmE,GASpBnE,EAAS,CACPC,KAAK,QACLC,QAASK,KDYF6D,CAAM7D,IAGrBT,EAAMoD,QAAQf,KAAK,UAQiBa,MAAO,CAAEqB,MAAO,KAA9C,UACE,oBAAIH,UAAU,cAAd,oBACA,wBAAOI,IAAI,WAAWtB,MAAO,CAAEZ,SAAU,GAAImC,YAAa,IAA1D,sBACY,OAEZ,uBACE1B,SAAU,SAACL,GAAD,OAAOyB,EAAQzB,EAAEM,OAAOF,QAClC3C,KAAK,OACLiE,UAAU,eACVnB,YAAY,aAEd,uBACA,wBAAQjC,MAAM,4BAAd,+B,QEbGM,mBAAQ,SAAUC,EAAOvB,GAEtC,OADA6B,QAAQC,IAAI,QAASP,GACd,CACLK,WAAU,OAAEL,QAAF,IAAEA,OAAF,EAAEA,EAAOK,cAHRN,EAxBf,SAAatB,GACX,OACE,qCACE,qBAAKoE,UAAU,kCAAf,SACE,mBAAGA,UAAU,eAAeM,KAAK,IAAjC,uBAIF,eAAC,IAAD,WACE,cAAC,IAAD,CACEC,OAAK,EACLC,KAAK,QACLC,UAAW7E,EAAM4B,WAAakD,EAAOC,IAEvC,cAAC,IAAD,CAAOJ,OAAK,EAACC,KAAK,mBAAmBC,UAAWE,a,gCCazCC,EAnCI,WAAiD,IAAhDzD,EAA+C,uDAAvC,CAACX,SAAW,CAACqE,QAAS,KAAMC,EAAW,uCAC/D,OAAOA,EAAO/E,MACV,IAAK,QAUD,OATA0B,QAAQC,IAAI,aAAaoD,IACzB3D,EAAK,eAAOA,IACP,YAAiB,EACtBA,EAAK,KAAW2D,EAAO9E,QACvBmB,EAAK,YAAkB,CACnBlB,WAAW,EACXC,SAAU,UACVC,WAAY,IAETgB,EAEX,IAAK,eAID,OAHAA,EAAK,eAAOA,IACP,YAAkB2D,EAAO9E,QAEvBmB,EAEX,IAAK,WAID,OAHAM,QAAQC,IAAI,YAAYoD,IACxB3D,EAAK,eAAOA,IACP,SAAe2D,EAAO9E,QACpBmB,EAEX,IAAK,QAGD,OAFAA,EAAK,eAAOA,IACP,SAAe2D,EAAO9E,QACpBmB,IC1BZ,I,QCAH4D,EAAaC,aDAG,SAAAC,GAAK,OAAE,SAAAC,GAAI,OAAE,SAAAJ,GAK7B,OAFaI,EAAKJ,OCHmBK,KAE1BC,cAAYC,EAAQN,GCAnCO,IAASC,OACP,cAAC,IAAMC,WAAP,UACA,cAAC,IAAD,CAAUP,MAAOQ,EAAjB,SACE,cAAC,EAAD,QAGFC,SAASC,eAAe,U","file":"static/js/main.ed44c0b0.chunk.js","sourcesContent":["// import React, { useEffect, useState } from \"react\";\r\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport immer from 'immer'\r\nimport React, { Component } from 'react'\r\n\r\nexport class Users extends Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n  }\r\n\r\n   SetGeneralChat = () => {\r\n    // console.log(\"room set\")\r\n    this.props.dispatch({\r\n      type: \"CURRENT CHAT\",\r\n      payload: {\r\n        isChannel: true,\r\n        chatName: \"general\",\r\n        receiverId: \"\"\r\n      }\r\n    })\r\n  }\r\n\r\n   SetUserChat = user => {\r\n    this.props.dispatch({\r\n      type: \"CURRENT CHAT\",\r\n      payload: {\r\n        isChannel: false,\r\n        chatName: user.name,\r\n        receiverId: user.id\r\n      }\r\n    })\r\n    //  console.log(\"checkkkk......\",this.props.currentChat.chatName)\r\n    if(!this.props.messages[user.name]){\r\n      // console.log(\"set krunnn....\")\r\n      let newMessages = immer(this.props.messages, draft => {\r\n        draft[user.name] = []\r\n      })\r\n      this.props.dispatch({\r\n        type: \"MESSAGES\",\r\n        payload: newMessages\r\n      })\r\n      // console.log(\"user set\",newMessages)\r\n    }\r\n   \r\n    \r\n  }\r\n  render() {\r\n    return (\r\n      <>\r\n      <div class=\"inbox_people\">\r\n        <div class=\"headind_srch\">\r\n          <div class=\"recent_heading\">\r\n            <h4>Group</h4>\r\n          </div>\r\n        </div>\r\n        <div class=\"inbox_chat\">\r\n        <div class=\"chat_list\" onClick={this.SetGeneralChat}>\r\n                      <div class=\"chat_people\">\r\n                        <div class=\"chat_img\">\r\n                          {\" \"}\r\n                          <AccountCircleIcon />{\" \"}\r\n                        </div>\r\n                        <div class=\"chat_ib\">\r\n                          <h5>\r\n                            General <span class=\"chat_date\">0</span>\r\n                          </h5>\r\n                          <p>Messages on this receives by everyone</p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"headind_srch\">\r\n          <div class=\"recent_heading\">\r\n            <h4>Online</h4>\r\n          </div>\r\n        </div>\r\n          {this.props?.allusers?.map((user) => {\r\n                if (this.props.user != user.name) {\r\n                  return (\r\n                    <div class=\"chat_list\" key={user.id} onClick={() => this.SetUserChat(user)}>\r\n                      <div class=\"chat_people\">\r\n                        <div class=\"chat_img\">\r\n                          {\" \"}\r\n                          <AccountCircleIcon />{\" \"}\r\n                        </div>\r\n                        <div class=\"chat_ib\">\r\n                          <h5>\r\n                            {user.name} <span class=\"chat_date\">0</span>\r\n                          </h5>\r\n                          <p>ID: {user.id}</p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                }\r\n              })\r\n            }\r\n        </div>\r\n      </div>\r\n    </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(function (state, props) {\r\n  return {\r\n    user: state?.user,\r\n    allusers:state?.allusers,\r\n    messages:state?.messages,\r\n    currentChat: state?.CurrentChat\r\n  };\r\n})(Users);\r\n","import io from 'socket.io-client'\r\nconst socket = io('http://localhost:8080')\r\nexport default socket","import React, { useEffect, useRef, useState } from \"react\";\r\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport Users from \"./Users\";\r\nimport { connect } from \"react-redux\";\r\nimport socket from \"./socket\";\r\nimport immer from \"immer\";\r\nimport ScrollMePlease from \"react-scrollable-feed\";\r\n\r\n// const socketRef = useRef()\r\n\r\nfunction Chat(props) {\r\n  console.log(\"yrssss\", props?.messages);\r\n  socket.on(\"newuser\", (allusers) => {\r\n    console.log(\"asdasdasdsadasdasd\",props)\r\n    props.dispatch({\r\n      type: \"USERS\",\r\n      payload: allusers,\r\n    });\r\n  });\r\n\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  socket.on(\"new-client\", (allusers) => {\r\n    console.log(\"new online user found.....\", allusers);\r\n    props.dispatch({\r\n      type: \"USERS\",\r\n      payload: allusers,\r\n    });\r\n  });\r\n  socket.on(\"new message\", ({ content, sender, chatName }) => {\r\n    const newMessages = immer(props.messages, (draft) => {\r\n      if (draft[chatName]) {\r\n        draft[chatName].push({ content, sender });\r\n      } else {\r\n        draft[chatName] = [{ content, sender }];\r\n      }\r\n    });\r\n    // console.log(\"new message received\",newMessages)\r\n    props.dispatch({\r\n      type: \"MESSAGES\",\r\n      payload: newMessages,\r\n    });\r\n  });\r\n\r\n  const sendMessage = (e) => {\r\n    e.preventDefault();\r\n    const payload = {\r\n      content: message,\r\n      to: props.currentChat.isChannel\r\n        ? props.currentChat.chatName\r\n        : props.currentChat.receiverId,\r\n      sender: props.user,\r\n      chatName: props.currentChat.chatName,\r\n      isChannel: props.currentChat.isChannel,\r\n    };\r\n    socket.emit(\"send message\", payload);\r\n    const newMessages = immer(props.messages, (draft) => {\r\n      draft[props.currentChat.chatName].push({\r\n        sender: props.user,\r\n        content: message,\r\n      });\r\n    });\r\n    props.dispatch({\r\n      type: \"MESSAGES\",\r\n      payload: newMessages,\r\n    });\r\n    setMessage(\"\");\r\n  };\r\n  return (\r\n    <>\r\n      <div class=\"container\">\r\n        <h3 class=\" text-center\">Welcome {props.user}</h3>\r\n        <div class=\"messaging\">\r\n          <div class=\"inbox_msg\">\r\n            <Users />\r\n            <div class=\"mesgs\">\r\n              <h4>\r\n                {\" \"}\r\n                <AccountCircleIcon fontSize={\"large\"} />\r\n                {props?.currentChat?.chatName}\r\n              </h4>\r\n              <div class=\"msg_history\">\r\n                <ScrollMePlease>\r\n                  {props?.messages[props?.currentChat.chatName]\r\n                    ? props?.messages[props.currentChat.chatName].map(\r\n                        (each, index) => {\r\n                          if (each.sender === props?.user) {\r\n                            return (\r\n                              <div class=\"outgoing_msg\">\r\n                                <div class=\"sent_msg\">\r\n                                  <p>{each.content}</p>\r\n                                  <span class=\"time_date\">\r\n                                    {\" \"}\r\n                                    {each.sender}\r\n                                  </span>{\" \"}\r\n                                </div>\r\n                              </div>\r\n                            );\r\n                          } else {\r\n                            return (\r\n                              <div class=\"incoming_msg\">\r\n                                <div class=\"incoming_msg_img\">\r\n                                  <AccountCircleIcon />\r\n                                </div>\r\n                                <div class=\"received_msg\">\r\n                                  <div class=\"received_withd_msg\">\r\n                                    <p>{each.content}</p>\r\n                                    <span class=\"time_date\">\r\n                                      {\" \"}\r\n                                      {each.sender}\r\n                                    </span>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            );\r\n                          }\r\n                        }\r\n                      )\r\n                    : \" \"}\r\n                </ScrollMePlease>\r\n              </div>\r\n              <div class=\"type_msg\">\r\n                <div class=\"input_msg_write\">\r\n                  <form onSubmit={sendMessage}>\r\n                    <input\r\n                      type=\"text\"\r\n                      class=\"write_msg\"\r\n                      name=\"msg\"\r\n                      value={message}\r\n                      onChange={(e) => setMessage(e.target.value)}\r\n                      placeholder=\"Type a message\"\r\n                    />\r\n                    <button class=\"msg_send_btn\">\r\n                      <SendIcon style={{ color: \"#fff\" }} />\r\n                    </button>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default connect((state, props) => {\r\n  return {\r\n    user: state?.user,\r\n    messages: state?.messages,\r\n    allusers: state?.allusers,\r\n    isloggedin: state?.isloggedin,\r\n    currentChat: state?.CurrentChat,\r\n  };\r\n})(Chat);\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport Users from \"./Users\";\r\nimport { connect } from \"react-redux\";\r\nimport io from \"socket.io-client\";\r\nimport { useParams } from \"react-router\";\r\nconst socket = io(\"http://localhost:7000\");\r\nfunction Chat(props) {\r\n  if (props.isloggedin != true) {\r\n    props.history.push(\"/\");\r\n  }\r\n  console.log(\"chatssss\", props);\r\n  const params = useParams()\r\n  const [message, setMessage] = useState(\"\");\r\n  const [chat, setChat] = useState([]);\r\n  const [people, setPeople] = useState([]);\r\n  console.log(\"chatttttsssss\", chat);\r\n  useEffect(() => {\r\n\r\n    socket.on(\"new-client\", (user) => {\r\n      console.log(\"new online user found.....\", user);\r\n      setPeople(user);\r\n    });\r\n\r\n    socket.on(\"message\", (payload) => {\r\n      setChat([...chat, payload]);\r\n    });\r\n  });\r\n\r\n  const sendMessage = (e) => {\r\n    e.preventDefault();\r\n    if (props.custom) {\r\n      console.log(\"parmas\",params.id)\r\n      console.log(message);\r\n      const msgData = {\r\n      msg: message,\r\n      id: props.user.id,\r\n      time: new Date(),\r\n      to: params.id\r\n    };\r\n    socket.emit(\"custom-message\", msgData);\r\n\r\n    } else {\r\n      console.log(message);\r\n      const msgData = {\r\n        msg: message,\r\n        id: props.user.id,\r\n        time: new Date(),\r\n      };\r\n      socket.emit(\"message\", msgData);\r\n    }\r\n\r\n    setMessage(\"\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div class=\"container\">\r\n        <h3 class=\" text-center\">Welcome {props?.user}</h3>\r\n        <div class=\"messaging\">\r\n          <div class=\"inbox_msg\">\r\n            <Users people={people} />\r\n            <div class=\"mesgs\">\r\n            <h4> {\"Public\"}</h4>\r\n              <div class=\"msg_history\">\r\n                \r\n                {chat.map((msg) => {\r\n                  if (msg.id === props.user.id) {\r\n                    return (\r\n                      <div class=\"outgoing_msg\" key={msg.id}>\r\n                        <div class=\"sent_msg\">\r\n                          <p>{msg.msg}</p>\r\n                          <span class=\"time_date\"> {msg.time}</span>{\" \"}\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  } else {\r\n                    return (\r\n                      <div class=\"incoming_msg\" key={msg.id}>\r\n                        <div class=\"incoming_msg_img\">\r\n                          <AccountCircleIcon />\r\n                        </div>\r\n                        <div class=\"received_msg\">\r\n                          <div class=\"received_withd_msg\">\r\n                            <p> {msg.msg}</p>\r\n                            <span class=\"time_date\">{msg.time}</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  }\r\n                })}\r\n              </div>\r\n              <div class=\"type_msg\">\r\n                <div class=\"input_msg_write\">\r\n                  <form onSubmit={sendMessage}>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"message\"\r\n                      placeholder=\"Type message\"\r\n                      value={message}\r\n                      onChange={(e) => {\r\n                        setMessage(e.target.value);\r\n                      }}\r\n                      required\r\n                    ></input>\r\n                    <button class=\"msg_send_btn\">\r\n                      <SendIcon style={{ color: \"#fff\" }} />\r\n                    </button>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default connect((state, props) => {\r\n  return {\r\n    user: state?.user,\r\n    isloggedin: state?.isloggedin,\r\n  };\r\n})(Chat);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport socket from \"./socket\";\r\nimport { login } from \"../reduxstore/thunk\";\r\nimport immer from \"immer\";\r\nfunction Login(props) {\r\n  const [user, setUser] = useState();\r\n  // const [yourID, setYourID] = useState()\r\n  // console.log(\"login props\",props)\r\n  function joinCallback(messages, room) {\r\n    console.log(\"aaaa\", messages, room);\r\n    const newMessages = immer(messages, (draft) => {\r\n      draft[room] = room;\r\n    });\r\n    props.dispatch({\r\n      type: \"MESSAGE\",\r\n      payload: newMessages,\r\n    });\r\n  }\r\n\r\n  let submitHandle = (e) => {\r\n    e.preventDefault();\r\n    socket.emit(\"join\", user);\r\n    socket.emit(\"join room\", \"general\");\r\n    props.dispatch(login(user));\r\n    // socket.emit(\"Join\",userData)\r\n\r\n    props.history.push(\"/chat\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-3\"></div>\r\n        <div className=\"col-md-6\">\r\n          <form onSubmit={submitHandle} style={{ width: 500 }}>\r\n            <h2 className=\"text-center\">Hop In</h2>\r\n            <label for=\"Username\" style={{ fontSize: 20, marginRight: 10 }}>\r\n              Username:{\" \"}\r\n            </label>\r\n            <input\r\n              onChange={(e) => setUser(e.target.value)}\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"Username\"\r\n            />\r\n            <br />\r\n            <button class=\"bth btn-dark form-control\">Join</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(function (state, props) {\r\n  return {\r\n    logged: state?.isloggedin,\r\n    messages: state?.messages,\r\n  };\r\n})(Login);\r\n","export function login (user){\r\n    return function(dispatch, getState){\r\n        // dispatch({\r\n        //     type: \"CURRENT CHAT\",\r\n        //     payload: {\r\n        //       isChannel: true,\r\n        //       chatName: \"general\",\r\n        //       receiverId: \"\"\r\n        //     }\r\n        //   })\r\n          dispatch({\r\n            type:\"ENTER\",\r\n            payload: user\r\n        })\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport \"./App.css\";\r\nimport Chat from \"./components/Chat\";\r\nimport Home from \"./components/Home\";\r\nimport Login from \"./components/Login\";\r\nimport { connect } from \"react-redux\";\r\nimport io from \"socket.io-client\";\r\nimport { BrowserRouter, Route, useHistory } from \"react-router-dom\";\r\n\r\nfunction App(props) {\r\n  return (\r\n    <>\r\n      <nav className=\"navbar navbar-dark bg-dark p-2 \">\r\n        <a className=\"navbar-brand\" href=\"#\">\r\n          WebChat\r\n        </a>\r\n      </nav>\r\n      <BrowserRouter>\r\n        <Route\r\n          exact\r\n          path=\"/chat\"\r\n          component={props.isloggedin ? Chat : Login}\r\n        ></Route>\r\n        <Route exact path=\"/ChatApplication\" component={Login}></Route>\r\n      </BrowserRouter>\r\n      {/* <Home/> */}\r\n      {/* {\r\n          props.isloggedin?  <Home/> :  <Login/> \r\n        } */}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default connect(function (state, props) {\r\n  console.log(\"state\", state);\r\n  return {\r\n    isloggedin: state?.isloggedin,\r\n  };\r\n})(App);\r\n","import React from 'react'\r\n\r\nconst reducerFun = (state = {messages : {general: []}}, action) => {\r\n    switch(action.type){\r\n        case \"ENTER\":{ \r\n            console.log(\"hit meeeee\",action)\r\n            state = {...state}\r\n            state[\"isloggedin\"] = true \r\n            state[\"user\"] = action.payload\r\n            state['CurrentChat'] = {\r\n                isChannel: true,\r\n                chatName: \"general\",\r\n                receiverId: \"\"\r\n              }\r\n            return state\r\n        }\r\n        case \"CURRENT CHAT\":{\r\n            state = {...state}\r\n            state['CurrentChat'] = action.payload\r\n            // console.log(\"ressducer....\",state[\"CurrentChat\"])\r\n            return state\r\n        }\r\n        case \"MESSAGES\": {\r\n            console.log(\"hahahhhaa\",action)\r\n            state = {...state}\r\n            state['messages'] = action.payload\r\n            return state\r\n        }\r\n        case \"USERS\": {\r\n            state = {...state}\r\n            state[\"allusers\"] = action.payload\r\n            return state\r\n        }\r\n        \r\n    }\r\n}\r\n\r\nexport default reducerFun\r\n","export function FirstMiddleWare(store) {\r\n  return function (next) {\r\n    return function (action) {};\r\n  };\r\n} //ES6\r\nexport let logger = store=>next=>action=>{\r\n\r\n    // console.log(\"Before Action \" , action.type ,store.getState())\r\n    var result = next(action)\r\n    // console.log(\"After Action store state is\" , store.getState())\r\n    return result\r\n}","import {createStore, applyMiddleware} from 'redux'\r\nimport reducer from './reducer'\r\nimport {logger} from \"./middleware\"\r\nimport thunk from 'redux-thunk'\r\n\r\nvar middleware = applyMiddleware(logger, thunk)\r\n\r\nexport default createStore(reducer,middleware)","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport 'bootstrap/dist/js/bootstrap.bundle'\r\nimport stateStore from './reduxstore/store'\r\nimport {Provider} from 'react-redux'\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n  <Provider store={stateStore}>\r\n    <App />\r\n  </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}